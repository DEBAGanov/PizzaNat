# Docker Compose Версии для PizzaNat

## Доступные версии

### 1. `docker-compose.yml` - Основная версия с переменными окружения
**Рекомендуется для разработки и гибкой настройки**

- ✅ Использует переменные окружения с значениями по умолчанию
- ✅ Поддержка .env файла для локальной разработки
- ✅ Безопасность: пароль БД без значения по умолчанию
- ✅ Легко настраивается для разных окружений

```bash
# Локальная разработка
cp env-template.txt .env
echo "TIMEWEB_DB_PASSWORD=your_password" >> .env
docker-compose up -d

# Timeweb Cloud (только пароль БД в панели управления)
# TIMEWEB_DB_PASSWORD=your_password
docker-compose up -d
```

### 2. `docker-compose.production.yml` - Production версия с заполненными данными
**Рекомендуется для быстрого развертывания**

- ✅ Все значения заполнены боевыми данными
- ✅ Нет зависимости от переменных окружения
- ✅ Быстрое развертывание одной командой
- ⚠️ Содержит чувствительные данные - используйте осторожно

```bash
# Быстрое развертывание
docker-compose -f docker-compose.production.yml up -d

# ВАЖНО: Замените пароль БД перед production использованием!
```

## Различия

| Параметр | docker-compose.yml | docker-compose.production.yml |
|----------|-------------------|-------------------------------|
| Переменные окружения | Да, с defaults | Нет, все заполнено |
| Пароль БД | Требует установки | Включен (замените!) |
| Гибкость настройки | Высокая | Низкая |
| Безопасность | Высокая | Средняя |
| Скорость развертывания | Средняя | Высокая |

## Рекомендации

### Для разработки
Используйте `docker-compose.yml` с .env файлом

### Для Timeweb Cloud
- **Вариант 1**: `docker-compose.yml` + установить только `TIMEWEB_DB_PASSWORD` в панели
- **Вариант 2**: `docker-compose.production.yml` + изменить пароль БД

### Для CI/CD
Используйте `docker-compose.yml` с переменными окружения в pipeline

## Безопасность

⚠️ **ВАЖНО**: `docker-compose.production.yml` содержит реальные токены и ключи:
- Не коммитьте в публичные репозитории
- Замените пароль БД на реальный
- Ограничьте доступ к файлу

## Поддержка

Оба файла поддерживают:
- ✅ Временные зоны (Europe/Moscow)
- ✅ JVM оптимизацию для облака
- ✅ Health checks
- ✅ Все интеграции (SMS, Telegram, S3)
- ✅ Производительность и мониторинг 