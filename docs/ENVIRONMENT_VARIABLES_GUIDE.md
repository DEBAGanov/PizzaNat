# üåê –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏—è PizzaNat

## –û–±–∑–æ—Ä

–í —Ä–∞–º–∫–∞—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Timeweb Cloud, –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `docker-compose.yml` –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª `.env` –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∞–º–æ–≥–æ docker-compose.yml.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω
cp env-template.txt .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
nano .env  # –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

### 2. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è production

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
# –í —Ñ–∞–π–ª–µ .env
TIMEWEB_DB_PASSWORD=your_actual_database_password
JWT_SECRET=your_generated_jwt_secret_key
```

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ó–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏–∑ .env
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f app
```

## üìã –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### üîí –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
|------------|----------|-------------|
| `TIMEWEB_DB_PASSWORD` | –ü–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –î–ê |
| `JWT_SECRET` | –°–µ–∫—Ä–µ—Ç –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤ | ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |

### üåê –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `SPRING_PROFILES_ACTIVE` | `prod` | Spring –ø—Ä–æ—Ñ–∏–ª—å |
| `SERVER_PORT` | `8080` | –ü–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| `CONTAINER_TIMEZONE` | `Europe/Moscow` | –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| `JVM_TIMEZONE` | `Europe/Moscow` | –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞ JVM |

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `TIMEWEB_DB_URL` | `jdbc:postgresql://45.10.41.59:5432/default_db` | URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `TIMEWEB_DB_USER` | `gen_user` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î |
| `DB_POOL_MAX_SIZE` | `8` | –ú–∞–∫—Å–∏–º—É–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π |
| `DB_POOL_MIN_IDLE` | `2` | –ú–∏–Ω–∏–º—É–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π |

### üóÇÔ∏è –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Timeweb S3)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `TIMEWEB_S3_ACCESS_KEY` | `AJK63DSBOEBQD3IVTLOT` | –ö–ª—é—á –¥–æ—Å—Ç—É–ø–∞ S3 |
| `TIMEWEB_S3_SECRET_KEY` | `eOkZ8nzUkylhcsgPRQVJdr8qmvblxvaq7zoEcNpk` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á S3 |
| `TIMEWEB_S3_BUCKET` | `f9c8e17a-pizzanat-products` | –ò–º—è bucket |

### üì± SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Exolve)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `EXOLVE_API_KEY` | `eyJhbGciOiJSUzI1NiIs...` | API –∫–ª—é—á Exolve |
| `EXOLVE_SENDER_NAME` | `+79304410750` | –ù–æ–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è |
| `SMS_CODE_LENGTH` | `4` | –î–ª–∏–Ω–∞ SMS –∫–æ–¥–∞ |
| `SMS_CODE_TTL` | `10` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–æ–¥–∞ (–º–∏–Ω) |

### ü§ñ Telegram –±–æ—Ç—ã

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `TELEGRAM_AUTH_BOT_TOKEN` | `7819187384:AAGJNn0c...` | –¢–æ–∫–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞ |
| `TELEGRAM_ADMIN_BOT_TOKEN` | `8052456616:AAEoAzBf...` | –¢–æ–∫–µ–Ω –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ –±–æ—Ç–∞ |
| `TELEGRAM_GATEWAY_ACCESS_TOKEN` | `AAGCGwAAIlEzNcCeEbrV...` | –¢–æ–∫–µ–Ω Telegram Gateway |

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `LOG_LEVEL_ROOT` | `WARN` | –û–±—â–∏–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–æ–≤ |
| `LOG_LEVEL_APP` | `INFO` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| `ACTUATOR_ENDPOINTS` | `health,info,metrics` | –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints |

## üîß –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–ª—è production (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

```bash
# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π .env –¥–ª—è production
TIMEWEB_DB_PASSWORD=your_secure_password
```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤ .env
SPRING_PROFILES_ACTIVE=dev
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_APP=DEBUG
JPA_SHOW_SQL=true
ACTUATOR_HEALTH_DETAILS=when_authorized
```

### –î–ª—è –æ—Ç–ª–∞–¥–∫–∏

```bash
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤ .env
LOG_LEVEL_ROOT=DEBUG
LOG_LEVEL_SPRING_WEB=DEBUG
JPA_SHOW_SQL=true
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤

```bash
# –ï—Å–ª–∏ –ø–æ—Ä—Ç 8080 –∑–∞–Ω—è—Ç
SERVER_PORT=8081
ACTUATOR_PORT=8081
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
DB_POOL_MAX_SIZE=16
DB_POOL_MIN_IDLE=4

# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ JVM
JVM_MAX_RAM_PERCENTAGE=80.0
```

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ app
docker-compose config | grep -A 100 "environment:"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec pizzanat-app env | grep TIMEWEB_DB_URL
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker-compose down

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
docker-compose up -d --force-recreate

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs -f app
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

```bash
# Health check
curl http://localhost:8080/actuator/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:8080/api/v1/categories
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª `.env`** –≤ git
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** –¥–ª—è production
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ JWT —Å–µ–∫—Ä–µ—Ç—ã**

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Timeweb Cloud

1. **–ü–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. **–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –∏–º–µ—é—Ç —Ä–∞–±–æ—á–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
3. **–ë–µ–∑ .env —Ñ–∞–π–ª–∞** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Timeweb Cloud:

1. **–£–¥–∞–ª–∏—Ç–µ –∏—Ö** –∏–∑ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–æ–ª—å–∫–æ** `TIMEWEB_DB_PASSWORD`
3. **–û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –±—É–¥—É—Ç –≤–∑—è—Ç—ã –∏–∑ docker-compose.yml

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Docker Compose Environment Variables](https://docs.docker.com/compose/environment-variables/)
- [Spring Boot Configuration](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config)
- [Timeweb Cloud Documentation](https://timeweb.cloud/help/)

## üÜò –ü–æ–∏—Å–∫ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å .env (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –≤–æ–∫—Ä—É–≥ =)
cat .env | grep "="

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down && docker-compose up -d --force-recreate
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ë–î
docker exec pizzanat-app env | grep TIMEWEB_DB

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ë–î
docker exec pizzanat-app pg_isready -h 45.10.41.59 -p 5432
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç

```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ .env
echo "SERVER_PORT=8081" >> .env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose down && docker-compose up -d
``` 