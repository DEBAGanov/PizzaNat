# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Telegram API 7.7

## –ü—Ä–æ–±–ª–µ–º–∞ ‚ùå
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –≤–µ—Ä—Å–∏–µ–π Telegram API 6.0 –Ω–µ –º–æ–≥–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `requestContact()`, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ –≤ –≤–µ—Ä—Å–∏–∏ 6.9+.

## –†–µ—à–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ StackOverflow ‚úÖ
–°–æ–≥–ª–∞—Å–Ω–æ [–æ–±—Å—É–∂–¥–µ–Ω–∏—é –Ω–∞ StackOverflow](https://stackoverflow.com/questions/78453108/why-telegram-web-app-api-version-is-6-0-and-cant-be-changed-while-to-access-fe), –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–∞–µ—Ç—Å—è —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ–º –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π —Ñ–∞–π–ª–∞ `telegram-web-app.js`.

### 1. **–°–∫–∞—á–∞–Ω –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª**
```bash
curl -o src/main/resources/static/miniapp/telegram-web-app.js https://telegram.org/js/telegram-web-app.js
```

### 2. **–ò–∑–º–µ–Ω–µ–Ω–∞ –≤–µ—Ä—Å–∏—è API**
```javascript
// –ë—ã–ª–æ:
var webAppVersion = '6.0';

// –°—Ç–∞–ª–æ:
var webAppVersion = '7.7';
```

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω—ã HTML —Ñ–∞–π–ª—ã**
–í—Å–µ HTML —Ñ–∞–π–ª—ã –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é:

**–ë—ã–ª–æ:**
```html
<script src="https://telegram.org/js/telegram-web-app.js"></script>
```

**–°—Ç–∞–ª–æ:**
```html
<!-- Telegram WebApp API (–ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è 7.7) -->
<script src="telegram-web-app.js"></script>
```

### 4. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `src/main/resources/static/miniapp/telegram-web-app.js` - –ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è 7.7
- `src/main/resources/static/miniapp/checkout.html` - –æ–±–Ω–æ–≤–ª–µ–Ω
- `src/main/resources/static/miniapp/menu.html` - –æ–±–Ω–æ–≤–ª–µ–Ω  
- `src/main/resources/static/miniapp/index.html` - –æ–±–Ω–æ–≤–ª–µ–Ω

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API 7.7 üöÄ

### –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:
- ‚úÖ `requestContact()` - –∑–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `requestWriteAccess()` - –∑–∞–ø—Ä–æ—Å –ø—Ä–∞–≤–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ `showPopup()` - –Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–ø–∞–ø—ã
- ‚úÖ `CloudStorage` - –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- ‚úÖ `BiometricManager` - –±–∏–æ–º–µ—Ç—Ä–∏—è
- ‚úÖ `switchInlineQuery()` - –∏–Ω–ª–∞–π–Ω –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ `disableVerticalSwipes()` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–∞–π–ø–æ–≤

### –°–æ–±—ã—Ç–∏—è:
- ‚úÖ `contactRequested` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- ‚úÖ `writeAccessRequested` - –ø—Ä–∞–≤–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É
- ‚úÖ `popupClosed` - –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–ø–∞–ø–∞

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ üîß

### 1. **–£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ requestContact()**
–£–±—Ä–∞–Ω—ã –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä—Å–∏–∏, —Ç–∞–∫ –∫–∞–∫ 7.7 –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã:

```javascript
// –ë—ã–ª–æ (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤–µ—Ä—Å–∏–∏):
const apiVersion = parseFloat(this.tg.version || '0.0');
if (apiVersion >= 6.9 && typeof this.tg.requestContact === 'function') {
    this.tg.requestContact();
}

// –°—Ç–∞–ª–æ (–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏):
if (typeof this.tg.requestContact === 'function') {
    this.tg.requestContact();
}
```

### 2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π**
```javascript
console.log('üîç Telegram WebApp features:', {
    requestContact: typeof this.tg.requestContact,
    requestWriteAccess: typeof this.tg.requestWriteAccess,
    showAlert: typeof this.tg.showAlert,
    showPopup: typeof this.tg.showPopup,
    cloudStorage: typeof this.tg.CloudStorage,
    biometricManager: typeof this.tg.BiometricManager
});
```

### 3. **–£–±—Ä–∞–Ω—ã fallback —Å–æ–æ–±—â–µ–Ω–∏—è**
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É "üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–º –µ—â–µ —Ä–∞–∑", —Ç–∞–∫ –∫–∞–∫ API 7.7 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–æ.

## –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã üéØ

### –í –∫–æ–Ω—Å–æ–ª–∏ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç:
```
üîç Telegram API version: 7.7
üîç Telegram WebApp features: {
    requestContact: "function",
    cloudStorage: "object",
    biometricManager: "object"
}
‚úÖ requestContact –¥–æ—Å—Ç—É–ø–µ–Ω (API 7.7), –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å...
üìû requestContact() –≤—ã–∑–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ
üìû contactRequested event received: {status: 'sent'}
```

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –∫–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–º –µ—â–µ —Ä–∞–∑"**
- ‚úÖ **–ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ WebAppMethodUnsupported**
- ‚úÖ **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π Telegram**
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö**

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ üìä

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –£–¥–∞–ª–µ–Ω–Ω–∞—è 6.0 | –õ–æ–∫–∞–ª—å–Ω–∞—è 7.7 |
|----------|---------------|---------------|
| requestContact() | ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| CloudStorage | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å |
| BiometricManager | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å |
| showPopup() | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å |
| –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å | üü° –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è | üü¢ –ü–æ–ª–Ω–∞—è |

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è ‚ö†Ô∏è

1. **–§–∞–π–ª –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å** –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π Telegram API
2. **–†–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** —É–≤–µ–ª–∏—á–∏–ª—Å—è –Ω–∞ ~111KB
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –±—Ä–∞—É–∑–µ—Ä—ã –±—É–¥—É—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
4. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏ üìñ
- [StackOverflow: Why Telegram Web App API version is 6.0](https://stackoverflow.com/questions/78453108/why-telegram-web-app-api-version-is-6-0-and-cant-be-changed-while-to-access-fe)
- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Telegram Mini Apps](https://core.telegram.org/bots/webapps)

**–†–µ–∑—É–ª—å—Ç–∞—Ç: –¢–µ–ø–µ—Ä—å –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Telegram API, –≤–∫–ª—é—á–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤!** üéâ

## –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 27.01.2025
