# üó∫Ô∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∑–æ–Ω–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç–∞–≤–∫–∏

## üìã –û–±–∑–æ—Ä

–ó–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤ –≥–æ—Ä–æ–¥–∞. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- ‚úÖ **–ì–∏–±–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–æ–Ω** –ø–æ —É–ª–∏—Ü–∞–º –∏ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- ‚úÖ **–†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤ –≥–æ—Ä–æ–¥–∞  
- ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É** —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ –ø–æ—Ä–æ–≥–∞–º–∏ –ø–æ –∑–æ–Ω–∞–º
- ‚úÖ **–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏** –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–æ–Ω—ã
- ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–æ–Ω** –ø—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **`delivery_zones`** - –û—Å–Ω–æ–≤–Ω—ã–µ –∑–æ–Ω—ã —Å —Ç–∞—Ä–∏—Ñ–∞–º–∏
2. **`delivery_zone_streets`** - –ü—Ä–∏–≤—è–∑–∫–∞ —É–ª–∏—Ü –∫ –∑–æ–Ω–∞–º
3. **`delivery_zone_keywords`** - –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω
4. **`DeliveryZoneService`** - –°–µ—Ä–≤–∏—Å —Ä–∞—Å—á–µ—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
5. **`DeliveryController`** - API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### delivery_zones
```sql
CREATE TABLE delivery_zones (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,                     -- "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞"
    description TEXT,                               -- "–¶–µ–Ω—Ç—Ä –≥–æ—Ä–æ–¥–∞"
    base_cost DECIMAL(10,2) NOT NULL,              -- 150.00
    free_delivery_threshold DECIMAL(10,2),         -- 800.00
    delivery_time_min INTEGER DEFAULT 30,          -- 20
    delivery_time_max INTEGER DEFAULT 45,          -- 30
    is_active BOOLEAN DEFAULT TRUE,
    priority INTEGER DEFAULT 0,                    -- –ß–µ–º –±–æ–ª—å—à–µ, —Ç–µ–º –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    color_hex VARCHAR(7) DEFAULT '#3498db'         -- –¶–≤–µ—Ç –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
);
```

### delivery_zone_streets
```sql
CREATE TABLE delivery_zone_streets (
    id SERIAL PRIMARY KEY,
    zone_id INTEGER REFERENCES delivery_zones(id),
    street_name VARCHAR(255) NOT NULL,             -- "–õ–µ–Ω–∏–Ω–∞"
    house_number_from INTEGER,                     -- 1 (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
    house_number_to INTEGER,                       -- 50 (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
    is_even_only BOOLEAN DEFAULT FALSE,            -- –¢–æ–ª—å–∫–æ —á–µ—Ç–Ω—ã–µ –¥–æ–º–∞
    is_odd_only BOOLEAN DEFAULT FALSE              -- –¢–æ–ª—å–∫–æ –Ω–µ—á–µ—Ç–Ω—ã–µ –¥–æ–º–∞
);
```

### delivery_zone_keywords
```sql
CREATE TABLE delivery_zone_keywords (
    id SERIAL PRIMARY KEY,
    zone_id INTEGER REFERENCES delivery_zones(id),
    keyword VARCHAR(255) NOT NULL,                 -- "–º–∫—Ä", "–°–ù–¢", "–ø—Ä–æ–º–∑–æ–Ω–∞"
    match_type VARCHAR(20) DEFAULT 'contains'      -- contains, starts_with, exact
);
```

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–æ–Ω –¥–ª—è –≤–∞—à–µ–≥–æ –≥–æ—Ä–æ–¥–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–æ–Ω

```sql
-- –ü—Ä–∏–º–µ—Ä –¥–ª—è –≥–æ—Ä–æ–¥–∞ –í–æ–ª–∂—Å–∫
INSERT INTO delivery_zones (name, description, base_cost, free_delivery_threshold, delivery_time_min, delivery_time_max, priority) VALUES
('–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞', '–¶–µ–Ω—Ç—Ä –≥–æ—Ä–æ–¥–∞ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —É–ª–∏—Ü–∞–º–∏', 150.00, 800.00, 20, 30, 1),
('–ñ–∏–ª—ã–µ —Ä–∞–π–æ–Ω—ã', '–ú–∏–∫—Ä–æ—Ä–∞–π–æ–Ω—ã –∏ —Å–ø–∞–ª—å–Ω—ã–µ —Ä–∞–π–æ–Ω—ã', 200.00, 1000.00, 30, 45, 2),
('–£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–π–æ–Ω—ã', '–ß–∞—Å—Ç–Ω—ã–π —Å–µ–∫—Ç–æ—Ä –∏ –ø—Ä–æ–º–∑–æ–Ω—ã', 300.00, 1500.00, 45, 60, 3);
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–ª–∏—Ü

```sql
-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ —É–ª–∏—Ü—ã (–∑–æ–Ω–∞ ID = 1)
INSERT INTO delivery_zone_streets (zone_id, street_name) VALUES
(1, '–õ–µ–Ω–∏–Ω–∞'),
(1, '–°–æ–≤–µ—Ç—Å–∫–∞—è'),
(1, '–ö–æ–º—Å–æ–º–æ–ª—å—Å–∫–∞—è');

-- –ñ–∏–ª—ã–µ —É–ª–∏—Ü—ã (–∑–æ–Ω–∞ ID = 2)  
INSERT INTO delivery_zone_streets (zone_id, street_name) VALUES
(2, '–û–∫—Ç—è–±—Ä—å—Å–∫–∞—è'),
(2, '–ü–∏–æ–Ω–µ—Ä—Å–∫–∞—è'),
(2, '–ú–æ–ª–æ–¥–µ–∂–Ω–∞—è');

-- –ü—Ä–∏–º–µ—Ä —Å –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –¥–æ–º–æ–≤
INSERT INTO delivery_zone_streets (zone_id, street_name, house_number_from, house_number_to) VALUES
(1, '–ú–∏—Ä–∞', 1, 100);  -- —É–ª. –ú–∏—Ä–∞ –¥–æ–º–∞ 1-100 –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –∑–æ–Ω–µ
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

```sql
-- –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–π–æ–Ω—ã (–∑–æ–Ω–∞ ID = 3)
INSERT INTO delivery_zone_keywords (zone_id, keyword, match_type) VALUES
(3, '–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∞—è', 'contains'),
(3, '–º–∫—Ä', 'contains'),
(3, '–°–ù–¢', 'contains'),
(3, '–î–∞—á–Ω–∞—è', 'starts_with');
```

## üéØ –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:

1. **–ü–æ–∏—Å–∫ –ø–æ —É–ª–∏—Ü–∞–º**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —É–ª–∏—Ü—ã –∏ –Ω–æ–º–µ—Ä–∞ –¥–æ–º–∞
2. **–ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ –∞–¥—Ä–µ—Å–µ
3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ü—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –∑–æ–Ω –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∑–æ–Ω–∞ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
4. **Fallback**: –ï—Å–ª–∏ –∑–æ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ - –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

### –ü—Ä–∏–º–µ—Ä—ã —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è:

```
"–≥. –í–æ–ª–∂—Å–∫, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 5"     ‚Üí –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞ (150‚ÇΩ)
"–≥. –í–æ–ª–∂—Å–∫, —É–ª. –û–∫—Ç—è–±—Ä—å—Å–∫–∞—è, 10"  ‚Üí –ñ–∏–ª—ã–µ —Ä–∞–π–æ–Ω—ã (200‚ÇΩ)  
"–≥. –í–æ–ª–∂—Å–∫, –º–∫—Ä –Æ–∂–Ω—ã–π"            ‚Üí –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–π–æ–Ω—ã (300‚ÇΩ)
"–≥. –í–æ–ª–∂—Å–∫, –°–ù–¢ –î—Ä—É–∂–±–∞"           ‚Üí –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–π–æ–Ω—ã (300‚ÇΩ)
"–≥. –ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å"      ‚Üí –í–Ω–µ –∑–æ–Ω—ã (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞)
```

## üì° API –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏

```bash
# –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
GET /api/v1/delivery/estimate?address=–≥.%20–í–æ–ª–∂—Å–∫,%20—É–ª.%20–õ–µ–Ω–∏–Ω–∞,%20–¥.%201

# –° —Å—É–º–º–æ–π –∑–∞–∫–∞–∑–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å–∫–∏–¥–æ–∫
GET /api/v1/delivery/estimate?address=–≥.%20–í–æ–ª–∂—Å–∫,%20—É–ª.%20–õ–µ–Ω–∏–Ω–∞,%20–¥.%201&orderAmount=900
```

### –û—Ç–≤–µ—Ç API

```json
{
  "address": "–≥. –í–æ–ª–∂—Å–∫, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 1",
  "deliveryAvailable": true,
  "zoneName": "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞",
  "zoneDescription": "–¶–µ–Ω—Ç—Ä –≥–æ—Ä–æ–¥–∞ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —É–ª–∏—Ü–∞–º–∏",
  "deliveryCost": 0,          // 0 —Ç.–∫. 900‚ÇΩ > 800‚ÇΩ (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞)
  "baseCost": 150,            // –ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–æ–Ω—ã
  "freeDeliveryThreshold": 800,
  "isDeliveryFree": true,
  "estimatedTime": "20-30 –º–∏–Ω—É—Ç",
  "estimatedTimeMin": 20,
  "estimatedTimeMax": 30,
  "message": "–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞",
  "currency": "RUB",
  "workingHours": "09:00-22:00",
  "city": "–í–æ–ª–∂—Å–∫",
  "region": "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–∞—Ä–∏–π –≠–ª"
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∑–æ–Ω–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

```bash
# –°–¥–µ–ª–∞—Ç—å —Ñ–∞–π–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x test_delivery_zones.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
./test_delivery_zones.sh
```

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

- ‚úÖ **13 —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –≤—Å–µ—Ö –∑–æ–Ω –∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- ‚úÖ **95%+ —É—Å–ø–µ—à–Ω–æ—Å—Ç—å** –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á–µ—Ç–∞** —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏

## ‚öôÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏

```sql
-- –û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è –∑–æ–Ω—ã
UPDATE delivery_zones 
SET base_cost = 180.00 
WHERE name = '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞';

-- –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏
UPDATE delivery_zones 
SET free_delivery_threshold = 1200.00 
WHERE name = '–ñ–∏–ª—ã–µ —Ä–∞–π–æ–Ω—ã';
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —É–ª–∏—Ü—ã

```sql
-- –î–æ–±–∞–≤–∏—Ç—å —É–ª–∏—Ü—É –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–æ–Ω—É
INSERT INTO delivery_zone_streets (zone_id, street_name) 
VALUES (1, '–ù–æ–≤–∞—è —É–ª–∏—Ü–∞');

-- –î–æ–±–∞–≤–∏—Ç—å —É–ª–∏—Ü—É —Å –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –¥–æ–º–æ–≤
INSERT INTO delivery_zone_streets (zone_id, street_name, house_number_from, house_number_to) 
VALUES (2, '–î–ª–∏–Ω–Ω–∞—è —É–ª–∏—Ü–∞', 1, 50);
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–æ–Ω—ã

```sql
-- –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∑–æ–Ω—É
UPDATE delivery_zones 
SET is_active = false 
WHERE name = '–£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–π–æ–Ω—ã';
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

–ü—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –∑–æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

```sql
-- –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç = –±–æ–ª–µ–µ –≤–∞–∂–Ω–∞—è –∑–æ–Ω–∞
UPDATE delivery_zones SET priority = 10 WHERE name = '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞';    -- –í—ã—Å—à–∏–π
UPDATE delivery_zones SET priority = 5  WHERE name = '–ñ–∏–ª—ã–µ —Ä–∞–π–æ–Ω—ã';         -- –°—Ä–µ–¥–Ω–∏–π  
UPDATE delivery_zones SET priority = 1  WHERE name = '–£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–π–æ–Ω—ã';     -- –ù–∏–∑–∫–∏–π
```

## üé® –¶–≤–µ—Ç–∞ –¥–ª—è –∞–¥–º–∏–Ω–∫–∏

```sql
-- –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ü–≤–µ—Ç–∞ –∑–æ–Ω–∞–º –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ
UPDATE delivery_zones SET color_hex = '#2ecc71' WHERE name = '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞';    -- –ó–µ–ª–µ–Ω—ã–π
UPDATE delivery_zones SET color_hex = '#3498db' WHERE name = '–ñ–∏–ª—ã–µ —Ä–∞–π–æ–Ω—ã';         -- –°–∏–Ω–∏–π
UPDATE delivery_zones SET color_hex = '#e74c3c' WHERE name = '–£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–π–æ–Ω—ã';     -- –ö—Ä–∞—Å–Ω—ã–π
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ü–æ–ª–µ–∑–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

```sql
-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –ø–æ –∑–æ–Ω–∞–º
SELECT dz.name, COUNT(o.id) as orders_count, AVG(o.total_amount) as avg_amount
FROM orders o
JOIN delivery_locations dl ON o.delivery_location_id = dl.id  
JOIN delivery_zones dz ON ... -- –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω—ã
GROUP BY dz.name;

-- –°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —É–ª–∏—Ü—ã
SELECT dzs.street_name, COUNT(*) as usage_count  
FROM delivery_zone_streets dzs
-- JOIN —Å —Ç–∞–±–ª–∏—Ü–µ–π –∑–∞–∫–∞–∑–æ–≤
GROUP BY dzs.street_name
ORDER BY usage_count DESC;
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**: –ü–æ–∏—Å–∫ —É–ª–∏—Ü –∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–µ–∑ —É—á–µ—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞
2. **–î–∏–∞–ø–∞–∑–æ–Ω—ã –¥–æ–º–æ–≤**: –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã - –≤—Å—è —É–ª–∏—Ü–∞ –≤—Ö–æ–¥–∏—Ç –≤ –∑–æ–Ω—É
3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã**: –ü—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –∑–æ–Ω –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∑–æ–Ω–∞ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞
5. **Fallback**: –î–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:

- üìç **–ì–µ–æ–∑–æ–Ω—ã**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª–∏–≥–æ–Ω–æ–≤ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü
- üïí **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã**: –†–∞–∑–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
- üìä **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–∞—Ä–∏—Ñ—ã**: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏
- üéØ **ML –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞ –Ω–∞ 2025-01-23* 