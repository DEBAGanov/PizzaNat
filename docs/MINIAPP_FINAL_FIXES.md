# üîß –§–∏–Ω–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Mini App

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª –æ–± –æ—à–∏–±–∫–∞—Ö –≤ `menu-app.js` –∏ `app.js` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–æ–≤–∞—Ä–æ–≤, —Ö–æ—Ç—è —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã API —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

## üîç **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

### 1. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã** ‚úÖ 
- **–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞:** –í—Å–µ —Ñ–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ `https://api.dimbopizza.ru`
- **–†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ (–æ—Ç 3-28 –ö–ë)
- **Content-Type:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### 2. **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** ‚úÖ
- `/api/v1/categories` - —Ä–∞–±–æ—Ç–∞–µ—Ç
- `/api/v1/products` - —Ä–∞–±–æ—Ç–∞–µ—Ç  
- `/api/v1/products/category/{id}` - —Ä–∞–±–æ—Ç–∞–µ—Ç

### 3. **–ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** 
API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–æ–±—ä–µ–∫—Ç —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π** `{content: [...]}`, –∞ –∫–æ–¥ –æ–∂–∏–¥–∞–ª **–º–∞—Å—Å–∏–≤**

## ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### 1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤**
**–§–∞–π–ª:** `src/main/java/com/baganov/pizzanat/config/WebConfig.java`

```java
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã Mini App
    registry.addResourceHandler("/miniapp/**")
            .addResourceLocations("classpath:/static/miniapp/")
            .setCachePeriod(3600); // 1 —á–∞—Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
    
    // –û–±—ã—á–Ω—ã–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
    registry.addResourceHandler("/static/**")
            .addResourceLocations("classpath:/static/")
            .setCachePeriod(3600);
}
```

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ API –æ—Ç–≤–µ—Ç–æ–≤**
**–§–∞–π–ª:** `src/main/resources/static/miniapp/api.js`

```javascript
// –ë–´–õ–û:
async getProductsByCategory(categoryId) {
    return this.makeRequest(`/products/category/${categoryId}`, { requiresAuth: false });
}

// –°–¢–ê–õ–û:
async getProductsByCategory(categoryId) {
    const response = await this.makeRequest(`/products/category/${categoryId}`, { requiresAuth: false });
    // API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª–µ–º content (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
    return response.content || response || [];
}
```

### 3. **–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è getProducts:**
```javascript
async getProducts(categoryId = null, page = 0, size = 20) {
    // ...
    const response = await this.makeRequest(url, { requiresAuth: false });
    // API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª–µ–º content (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
    return response.content || response || [];
}
```

### 4. **–†–µ–≤–µ—Ä—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–∏–ª –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ `menu-app.js`:
```javascript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–∏–ª:
const products = await this.api.getProductsByCategory(category.id);

// –¢–µ–ø–µ—Ä—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ API –º–æ–¥—É–ª–µ
```

## üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

### **–ü—Ä–æ–¥–∞–∫—à–µ–Ω —Å–µ—Ä–≤–µ—Ä (`https://api.dimbopizza.ru`):**
- ‚úÖ –í—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### **–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (`/miniapp`) ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ + —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–ª–Ω–æ–µ –º–µ–Ω—é
2. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–µ–Ω—é** (`/miniapp/menu`) ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∫–æ–º–ø–∞–∫—Ç–Ω–æ
3. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤** ‚Üí —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é
4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É** ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞–º–∏

## üöÄ **–§–∏–Ω–∞–ª—å–Ω—ã–µ —à–∞–≥–∏:**

1. **–î–µ–ø–ª–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
   ```bash
   # –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π
   ./gradlew build
   # –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   ```

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ: https://t.me/DIMBOpizzaBot/DIMBO
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–æ–ª–Ω–æ–µ –º–µ–Ω—é: https://t.me/DIMBOpizzaBot/menu
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω—É

## üìù **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –æ—Ç–≤–µ—Ç–æ–≤:**
```json
// –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (–º–∞—Å—Å–∏–≤)
[
  {"id": 1, "name": "–ü–∏—Ü—Ü—ã", ...}
]

// –¢–æ–≤–∞—Ä—ã (–æ–±—ä–µ–∫—Ç —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)  
{
  "content": [
    {"id": 1, "name": "–ú–∞—Ä–≥–∞—Ä–∏—Ç–∞", ...}
  ],
  "totalElements": 10,
  "totalPages": 2
}
```

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –∫–æ–¥–µ:**
```javascript
// –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
return response.content || response || [];
```

## ‚ú® **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ:**
–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ç–æ–≤–∞—Ä–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. Mini App —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/menu`
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã API
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ—Ä–∑–∏–Ω–æ–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞–º–∏
