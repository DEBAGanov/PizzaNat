# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram Mini App

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ 1. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ë–ª–æ–∫ "–í—Å–µ —Ç–æ–≤–∞—Ä—ã" –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- **–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω –±–ª–æ–∫, –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ "üìã –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã (/menu)"
- **–§–∞–π–ª—ã**: `src/main/resources/static/miniapp/index.html`, `app.js`

### ‚úÖ 2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–µ–Ω—é (/menu)
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø–æ–ª–Ω—ã–º –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/menu` –ø–æ –æ–±—Ä–∞–∑—Ü—É @DurgerKingBot
- **–§–∞–π–ª—ã**: 
  - `src/main/resources/static/miniapp/menu.html`
  - `src/main/resources/static/miniapp/menu-styles.css`
  - `src/main/resources/static/miniapp/menu-app.js`
  - `src/main/java/com/baganov/pizzanat/controller/HomeController.java`

### ‚úÖ 3. –ö–æ—Ä–∑–∏–Ω–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ –¥–æ–±–∞–≤–ª—è–ª–æ—Å—å –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–§–∞–π–ª—ã**: `menu-app.js` - –º–µ—Ç–æ–¥—ã `addToCart`, `removeFromCart`, `renderProducts`

### ‚úÖ 4. –û—à–∏–±–∫–∞ HTTP 404 –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
- **–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∞ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- **–†–µ—à–µ–Ω–∏–µ**: 
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏ `initData` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π Telegram
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `setAuthToken` –≤ API
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getProductsByCategory`
- **–§–∞–π–ª—ã**: 
  - `src/main/java/com/baganov/pizzanat/service/TelegramWebAppService.java`
  - `src/main/resources/static/miniapp/api.js`

### ‚úÖ 5. –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π UI –∫–∞–∫ —É @DurgerKingBot
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ö—Ä—É–ø–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏ –∏–∑–±—ã—Ç–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–¥–µ–ª–∞–Ω –¥–∏–∑–∞–π–Ω —Å –º–∞–ª–µ–Ω—å–∫–∏–º–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
  - –ö–∞—Ä—Ç–∏–Ω–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤: 50px ‚Üí 40px (–º–æ–±–∏–ª—å–Ω—ã–µ)
  - –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–æ–≤: —É–º–µ–Ω—å—à–µ–Ω –Ω–∞ 2-4px
  - –û—Ç—Å—Ç—É–ø—ã –∏ —Ä–∞–∑–º–µ—Ä—ã –∫–Ω–æ–ø–æ–∫: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
  - –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞: 3 –∫–æ–ª–æ–Ω–∫–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
- **–§–∞–π–ª—ã**: `menu-styles.css`

## üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìû –ó–∞–ø—Ä–æ—Å –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å `requestContact()` –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ

### üé® –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —ç–∫—Ä–∞–Ω–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Telegram —Ç–µ–º (—Å–≤–µ—Ç–ª–∞—è/—Ç–µ–º–Ω–∞—è)
- Haptic feedback –¥–ª—è –ª—É—á—à–µ–≥–æ UX

### üíæ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã –≤ `localStorage`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/main/resources/static/miniapp/
‚îú‚îÄ‚îÄ index.html          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Ç–æ–ª—å–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
‚îú‚îÄ‚îÄ menu.html           # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–µ–Ω—é (–≤—Å–µ —Ç–æ–≤–∞—Ä—ã)
‚îú‚îÄ‚îÄ styles.css          # –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ menu-styles.css     # –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–µ–Ω—é
‚îú‚îÄ‚îÄ api.js              # API –º–æ–¥—É–ª—å
‚îú‚îÄ‚îÄ app.js              # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–≥–∏–∫–∞
‚îî‚îÄ‚îÄ menu-app.js         # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–µ–Ω—é –ª–æ–≥–∏–∫–∞
```

## üîó –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### Backend
- `GET /miniapp` ‚Üí `/miniapp/index.html`
- `GET /miniapp/menu` ‚Üí `/miniapp/menu.html`
- `POST /api/v1/telegram-webapp/auth` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Mini App
- `POST /api/v1/telegram-webapp/validate-init-data` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### Frontend
- `https://t.me/DIMBOpizzaBot/DIMBO` - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `https://t.me/DIMBOpizzaBot/menu` - –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –º–µ–Ω—é

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
```bash
./scripts/test_miniapp_fixes.sh
```

## üì± –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Å—Å—ã–ª–∫—É –Ω–∞ –º–µ–Ω—é
2. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ /menu**: –ü–æ–ª–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Å—Ç–∏–ª–µ @DurgerKingBot
3. **–ö–æ—Ä–∑–∏–Ω–∞**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
4. **–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞**: –ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
5. **–ú–æ–±–∏–ª—å–Ω—ã–π UI**: –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –º–∞–ª–µ–Ω—å–∫–∏–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∏ –¥–∏–∑–∞–π–Ω—É @DurgerKingBot! üçï‚ú®
