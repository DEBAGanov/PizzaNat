# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –°–∏–º–ø—Ç–æ–º—ã
- –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏/–¥–µ–ø–ª–æ—è –∫–∞—Ä—Ç–∏–Ω–∫–∏ "—Å–∫–ª–µ–∏–≤–∞—é—Ç—Å—è" –≤ –æ–¥–Ω—É
- –í –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏–º–µ—é—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –ü—Ä–∏—á–∏–Ω—ã
1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –º–∞–ø–ø–∏–Ω–≥–µ** - –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –æ–¥–∏–Ω —Ñ–∞–π–ª
2. **–ü–µ—Ä–µ–∑–∞–ø–∏—Å—å –≤ S3** - –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª —Å —Ç–µ–º –∂–µ –∏–º–µ–Ω–µ–º –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è
3. **–û—à–∏–±–∫–∏ –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. **üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê** - –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —è–≤–ª—è—é—Ç—Å—è –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏

## üõ†Ô∏è –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞ –≤ ImageUploader
```bash
# –ü–æ–∏—Å–∫ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ–¥–µ
grep -n "pizza_.*\.png" src/main/java/com/baganov/pizzanat/util/ImageUploader.java

# –ü–æ–∏—Å–∫ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∑–Ω–∞—á–µ–Ω–∏–π
grep -o '"products/[^"]*"' src/main/java/com/baganov/pizzanat/util/ImageUploader.java | sort | uniq -d
```

### 2. üîë –ö–õ–Æ–ß–ï–í–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: MD5 –∞–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ MD5 —Ö–µ—à–µ–π –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
cd src/main/resources/static/images/products
md5 *.png

# –ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
md5 *.png | sort | uniq -d
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ —Ñ–∞–π–ª–æ–≤
```bash
ls -lah src/main/resources/static/images/products/
# –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ: –≤—Å–µ —Ñ–∞–π–ª—ã –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2.0MB)
```

### 4. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
md5 src/main/resources/images/products/*.png
md5 src/main/resources/static/images/products/*.png

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ö–µ—à–µ–π
diff <(md5 src/main/resources/images/products/*.png | sort) \
     <(md5 src/main/resources/static/images/products/*.png | sort)
```

## üéØ –†–ï–ê–õ–¨–ù–´–ô –°–õ–£–ß–ê–ô: –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã PizzaNat

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
- **–í–°–ï 12 —Ñ–∞–π–ª–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–∏—Ü—Ü** –∏–º–µ–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π MD5: `f303872320628d937b75a422c020c774`
- **–í—Å–µ —Ñ–∞–π–ª—ã** –∏–º–µ–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä: 2.0MB
- **–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–∏ –∫–∞–∫–æ–º-—Ç–æ –¥–µ–ø–ª–æ–µ –≤—Å–µ —Ñ–∞–π–ª—ã –±—ã–ª–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ã –æ–¥–Ω–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º

### –†–µ—à–µ–Ω–∏–µ
```bash
# 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
cp src/main/resources/images/products/*.png src/main/resources/static/images/products/

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
cd src/main/resources/static/images/products
md5 *.png

# 3. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker compose down
docker compose up -d --build
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç
- **–î–û**: –í—Å–µ —Ñ–∞–π–ª—ã - `f303872320628d937b75a422c020c774`
- **–ü–û–°–õ–ï**: –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π MD5 —Ö–µ—à
- **–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –≤ ImageUploader.java
- [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å MD5 –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ images/
- [ ] –°—Ä–∞–≤–Ω–∏—Ç—å —Å —Ñ–∞–π–ª–∞–º–∏ –≤ –ø–∞–ø–∫–µ static/
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ S3
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

### –í—Å–µ —Ñ–∞–π–ª—ã –¥—É–±–ª–∏–∫–∞—Ç—ã, –µ—Å–ª–∏:
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ MD5 —Ö–µ—à–∏ —É –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤
- –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—ã–≥–ª—è–¥—è—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ
- –í S3 –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª

### –†–µ—à–µ–Ω–∏–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–ª—É—á–∞—è:
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –ø–∞–ø–∫–∏
cp src/main/resources/images/products/*.png src/main/resources/static/images/products/

# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
docker compose down && docker compose up -d --build
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
md5 src/main/resources/static/images/products/*.png | sort | uniq -d

# –ï—Å–ª–∏ –µ—Å—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
if [ $(md5 src/main/resources/static/images/products/*.png | sort | uniq -d | wc -l) -gt 0 ]; then
    echo "üö® –û–ë–ù–ê–†–£–ñ–ï–ù–´ –î–£–ë–õ–ò–ö–ê–¢–´ –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô!"
    cp src/main/resources/images/products/*.png src/main/resources/static/images/products/
fi
```

## üîß –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –≤ CI/CD pipeline
2. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ S3** –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª–æ–≤
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ø–ª–æ—è

---

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-01-07 - –î–æ–±–∞–≤–ª–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–π –æ–ø—ã—Ç —Ä–µ—à–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–±–ª–µ–º—ã —Å –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π* 