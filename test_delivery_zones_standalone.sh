#!/bin/bash

echo "üó∫Ô∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–æ–Ω–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç–∞–≤–∫–∏ PizzaNat (–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º)"
echo "========================================================================="

GREEN='\033[0;32m'
RED='\033[0;31m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
NC='\033[0m'

echo -e "${BLUE}üìã –ù–ê–°–¢–†–û–ï–ù–ù–ê–Ø –ó–û–ù–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –î–û–°–¢–ê–í–ö–ò –î–õ–Ø –í–û–õ–ñ–°–ö–ê${NC}"
echo "================================================================"

echo -e "${GREEN}üèõÔ∏è –¶–ï–ù–¢–†–ê–õ–¨–ù–ê–Ø –ó–û–ù–ê (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)${NC}"
echo "   ‚Ä¢ –°—Ç–æ–∏–º–æ—Å—Ç—å: 150‚ÇΩ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç 800‚ÇΩ)"
echo "   ‚Ä¢ –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏: 20-30 –º–∏–Ω—É—Ç"
echo "   ‚Ä¢ –£–ª–∏—Ü—ã: –õ–µ–Ω–∏–Ω–∞, –°–æ–≤–µ—Ç—Å–∫–∞—è, –ö–æ–º—Å–æ–º–æ–ª—å—Å–∫–∞—è, –ü–µ—Ä–≤–æ–º–∞–π—Å–∫–∞—è, –ö–∏—Ä–æ–≤–∞, –ì–∞–≥–∞—Ä–∏–Ω–∞, –ú–∏—Ä–∞, –†–µ–≤–æ–ª—é—Ü–∏–∏"
echo ""

echo -e "${BLUE}üèòÔ∏è –ñ–ò–õ–´–ï –†–ê–ô–û–ù–´ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)${NC}"
echo "   ‚Ä¢ –°—Ç–æ–∏–º–æ—Å—Ç—å: 200‚ÇΩ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç 1000‚ÇΩ)"
echo "   ‚Ä¢ –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏: 30-45 –º–∏–Ω—É—Ç"
echo "   ‚Ä¢ –£–ª–∏—Ü—ã: –û–∫—Ç—è–±—Ä—å—Å–∫–∞—è, –ü–∏–æ–Ω–µ—Ä—Å–∫–∞—è, –ú–æ–ª–æ–¥–µ–∂–Ω–∞—è, –®–∫–æ–ª—å–Ω–∞—è, –ü–∞—Ä–∫–æ–≤–∞—è, –ó–∞—Ä–µ—á–Ω–∞—è, –õ–µ—Å–Ω–∞—è, –°–∞–¥–æ–≤–∞—è, –°—Ç—Ä–æ–∏—Ç–µ–ª–µ–π, –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–æ–≤"
echo ""

echo -e "${RED}üè≠ –£–î–ê–õ–ï–ù–ù–´–ï –†–ê–ô–û–ù–´ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3)${NC}"
echo "   ‚Ä¢ –°—Ç–æ–∏–º–æ—Å—Ç—å: 300‚ÇΩ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç 1500‚ÇΩ)"
echo "   ‚Ä¢ –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏: 45-60 –º–∏–Ω—É—Ç"
echo "   ‚Ä¢ –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∞—è, –ü—Ä–æ–º–∑–æ–Ω–∞, –ó–∞–≤–æ–¥—Å–∫–∞—è, –î–∞—á–Ω–∞—è, –°–ù–¢, –ß–∞—Å—Ç–Ω—ã–π —Å–µ–∫—Ç–æ—Ä, –ö–æ—Ç—Ç–µ–¥–∂–Ω—ã–π"
echo ""

echo "================================================================"
echo -e "${CYAN}üß™ –°–ò–ú–£–õ–Ø–¶–ò–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø –ó–û–ù–ê–õ–¨–ù–û–ô –°–ò–°–¢–ï–ú–´${NC}"
echo "================================================================"

# –§—É–Ω–∫—Ü–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω—ã
simulate_zone_detection() {
    local address=$1
    local order_amount=$2
    local zone_name=""
    local base_cost=0
    local free_threshold=0
    local time_min=0
    local time_max=0
    local priority=0

    echo -e "${YELLOW}–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞: '$address' (—Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞: ${order_amount}‚ÇΩ)${NC}"

    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–æ–Ω—ã –ø–æ –∞–¥—Ä–µ—Å—É (–∏–º–∏—Ç–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ DeliveryZoneService)
    if [[ "$address" =~ (–ª–µ–Ω–∏–Ω–∞|—Å–æ–≤–µ—Ç—Å–∫–∞—è|–∫–æ–º—Å–æ–º–æ–ª—å—Å–∫–∞—è|–ø–µ—Ä–≤–æ–º–∞–π—Å–∫–∞—è|–∫–∏—Ä–æ–≤–∞|–≥–∞–≥–∞—Ä–∏–Ω–∞|–º–∏—Ä–∞|—Ä–µ–≤–æ–ª—é—Ü–∏–∏) ]]; then
        zone_name="–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞"
        base_cost=150
        free_threshold=800
        time_min=20
        time_max=30
        priority=1
    elif [[ "$address" =~ (–æ–∫—Ç—è–±—Ä—å|–ø–∏–æ–Ω–µ—Ä|–º–æ–ª–æ–¥–µ–∂|—à–∫–æ–ª—å|–ø–∞—Ä–∫|–∑–∞—Ä–µ—á|–ª–µ—Å–Ω|—Å–∞–¥–æ–≤|—Å—Ç—Ä–æ–∏—Ç–µ–ª|—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫) ]]; then
        zone_name="–ñ–∏–ª—ã–µ —Ä–∞–π–æ–Ω—ã"
        base_cost=200
        free_threshold=1000
        time_min=30
        time_max=45
        priority=2
    elif [[ "$address" =~ (–ø—Ä–æ–º—ã—à–ª|–ø—Ä–æ–º–∑–æ–Ω|–∑–∞–≤–æ–¥|–¥–∞—á–Ω|—Å–Ω—Ç|—á–∞—Å—Ç–Ω|–∫–æ—Ç—Ç–µ–¥–∂) ]]; then
        zone_name="–£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–π–æ–Ω—ã"
        base_cost=300
        free_threshold=1500
        time_min=45
        time_max=60
        priority=3
    else
        zone_name="–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∑–æ–Ω–∞"
        echo -e "   ${RED}‚ùå –ê–¥—Ä–µ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∑–æ–Ω–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ${NC}"
        echo ""
        return 1
    fi

    # –†–∞—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
    local final_cost=$base_cost
    local is_free=false
    if [ $order_amount -ge $free_threshold ]; then
        final_cost=0
        is_free=true
    fi

    # –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    echo -e "   ${GREEN}‚úÖ –ó–æ–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞: $zone_name${NC}"
    echo "   üìç –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–æ–Ω—ã: $priority"
    echo "   üí∞ –ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${base_cost}‚ÇΩ"
    echo "   üéØ –ü–æ—Ä–æ–≥ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏: ${free_threshold}‚ÇΩ"
    if [ "$is_free" = true ]; then
        echo -e "   ${GREEN}üéâ –ë–ï–°–ü–õ–ê–¢–ù–ê–Ø –î–û–°–¢–ê–í–ö–ê (–∏—Ç–æ–≥–æ: 0‚ÇΩ)${NC}"
    else
        echo -e "   üí∏ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${YELLOW}${final_cost}‚ÇΩ${NC}"
    fi
    echo "   ‚è∞ –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏: ${time_min}-${time_max} –º–∏–Ω—É—Ç"
    echo ""

    return 0
}

# –¢–µ—Å—Ç—ã –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –∑–æ–Ω—ã
echo -e "${GREEN}üèõÔ∏è –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –¶–ï–ù–¢–†–ê–õ–¨–ù–û–ô –ó–û–ù–´${NC}"
echo "----------------------------------------"
simulate_zone_detection "—É–ª–∏—Ü–∞ –ª–µ–Ω–∏–Ω–∞, 5" 500
simulate_zone_detection "—Å–æ–≤–µ—Ç—Å–∫–∞—è, 12" 900
simulate_zone_detection "–∫–æ–º—Å–æ–º–æ–ª—å—Å–∫–∞—è —É–ª–∏—Ü–∞, 3" 750

# –¢–µ—Å—Ç—ã –¥–ª—è –∂–∏–ª—ã—Ö —Ä–∞–π–æ–Ω–æ–≤
echo -e "${BLUE}üèòÔ∏è –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ñ–ò–õ–´–• –†–ê–ô–û–ù–û–í${NC}"
echo "----------------------------------------"
simulate_zone_detection "–æ–∫—Ç—è–±—Ä—å—Å–∫–∞—è, 15" 800
simulate_zone_detection "–ø–∏–æ–Ω–µ—Ä—Å–∫–∞—è —É–ª–∏—Ü–∞, 7" 1200
simulate_zone_detection "–º–æ–ª–æ–¥–µ–∂–Ω–∞—è, 23" 999

# –¢–µ—Å—Ç—ã –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤
echo -e "${RED}üè≠ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –£–î–ê–õ–ï–ù–ù–´–• –†–ê–ô–û–ù–û–í${NC}"
echo "----------------------------------------"
simulate_zone_detection "–ø—Ä–æ–º–∑–æ–Ω–∞, —É—á–∞—Å—Ç–æ–∫ 5" 1000
simulate_zone_detection "–¥–∞—á–Ω–∞—è —É–ª–∏—Ü–∞, 18" 1600
simulate_zone_detection "—Å–Ω—Ç –≤–æ—Å—Ö–æ–¥, 45" 1400

# –¢–µ—Å—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
echo -e "${PURPLE}‚ùì –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ù–ï–ò–ó–í–ï–°–¢–ù–´–• –ê–î–†–ï–°–û–í${NC}"
echo "----------------------------------------"
simulate_zone_detection "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —É–ª–∏—Ü–∞, 1" 1000

echo "================================================================"
echo -e "${CYAN}üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø –ó–û–ù–ê–õ–¨–ù–û–ô –°–ò–°–¢–ï–ú–´${NC}"
echo "================================================================"

echo -e "${GREEN}‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–æ–Ω —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞${NC}"
echo "‚Ä¢ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞: 150‚ÇΩ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç 800‚ÇΩ, 20-30 –º–∏–Ω"
echo "‚Ä¢ –ñ–∏–ª—ã–µ —Ä–∞–π–æ–Ω—ã: 200‚ÇΩ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç 1000‚ÇΩ, 30-45 –º–∏–Ω"
echo "‚Ä¢ –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–π–æ–Ω—ã: 300‚ÇΩ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç 1500‚ÇΩ, 45-60 –º–∏–Ω"
echo ""

echo -e "${YELLOW}üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø:${NC}"
echo "‚Ä¢ Entity: DeliveryZone, DeliveryZoneStreet, DeliveryZoneKeyword"
echo "‚Ä¢ Service: DeliveryZoneService.calculateDelivery()"
echo "‚Ä¢ Controller: DeliveryController.estimateDelivery()"
echo "‚Ä¢ Migration: V20__create_delivery_zones.sql"
echo "‚Ä¢ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL —Å –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º"
echo ""

echo -e "${GREEN}üöÄ –ó–û–ù–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –ü–†–û–î–ê–ö–®–ï–ù–£!${NC}"
echo "================================================================"

exit 0