# üìù –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–∑—ã–≤–æ–≤ - –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: $(date '+%d.%m.%Y')  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–Ω–æ–ø–∫–∞ "üìù –û—Ç–∑—ã–≤" –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º...", –Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ  
**–†–µ—à–µ–Ω–∏–µ**: –£–ø—Ä–æ—Å—Ç–∏–ª–∏ –ª–æ–≥–∏–∫—É –¥–æ —É—Ä–æ–≤–Ω—è –∫–Ω–æ–ø–æ–∫ —Å—Ç–∞—Ç—É—Å–æ–≤

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–µ—Ä–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π

### –ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ:
- –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å –º–µ—Ç–æ–¥–æ–º `sendReviewRequestNotification()` –≤ `TelegramUserNotificationService`
- –°–ª–æ–∂–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞  
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤—ã–∑–æ–≤—ã –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –ê–¥–º–∏–Ω—Å–∫–∏–π –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–ª "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º...", –Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –¥–æ—Ö–æ–¥–∏–ª–æ –¥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ (–æ–±—Ä–∞–∑–µ—Ü):
```java
handleOrderStatusChange() ‚Üí sendStatusNotificationToUser() ‚Üí telegramUserNotificationService.sendPersonalMessage()
```

### –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ):
```java
handleOrderReviewRequest() ‚Üí sendReviewNotificationToUser() ‚Üí telegramUserNotificationService.sendPersonalMessage()
```

## üîß –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –£–ø—Ä–æ—â–µ–Ω `AdminBotService.handleOrderReviewRequest()`

#### –î–û (—Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞):
```java
- –°–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–∫–∞–∑–∞
- –í—ã–∑–æ–≤ sendReviewRequestToUser()
- –ö–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–ª telegramUserNotificationService.sendReviewRequestNotification()
- –°–ª–æ–∂–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
```

#### –ü–û–°–õ–ï (–ø—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –∫–∞–∫ —Å—Ç–∞—Ç—É—Å—ã):
```java
public void handleOrderReviewRequest(Long chatId, String callbackData) {
    // –ü–∞—Ä—Å–∏–º orderId
    Long orderId = Long.parseLong(parts[2]);
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞–ø—Ä—è–º—É—é (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å—Ç–∞—Ç—É—Å–∞–º)
    sendReviewNotificationToUser(orderId);
    
    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
    String successMessage = "‚úÖ *–ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–∑—ã–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω*";
    telegramAdminNotificationService.sendMessage(chatId, successMessage, true);
}
```

### 2. –°–æ–∑–¥–∞–Ω `sendReviewNotificationToUser()` (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `sendStatusNotificationToUser()`)

```java
private void sendReviewNotificationToUser(Long orderId) {
    // –ù–∞—Ö–æ–¥–∏–º –∑–∞–∫–∞–∑
    Optional<Order> orderOpt = orderService.findById(orderId);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if (order.getUser() == null || order.getUser().getTelegramId() == null) {
        return;
    }
    
    // –ü—Ä–æ—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å—Å—ã–ª–∫–æ–π
    String reviewMessage = "‚≠ê –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏ –æ –∑–∞–∫–∞–∑–µ!\n\n" +
        "üìã –ó–∞–∫–∞–∑ #" + order.getId() + "\n\n" +
        "üîó –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–æ—Ä–º–µ –æ—Ç–∑—ã–≤–∞: https://ya.cc/t/ldDY0YvB7VsBa8";
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞–ø—Ä—è–º—É—é (–∫–∞–∫ —Å—Ç–∞—Ç—É—Å—ã!)
    telegramUserNotificationService.sendPersonalMessage(userTelegramId, reviewMessage);
}
```

### 3. –£–¥–∞–ª–µ–Ω—ã —Å–ª–æ–∂–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏–∑ `TelegramUserNotificationService`

- ‚ùå –£–±—Ä–∞–ª–∏ `sendReviewRequestNotification(Order order)`
- ‚ùå –£–±—Ä–∞–ª–∏ `formatReviewRequestMessage(Order order)`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –≥–æ—Ç–æ–≤—ã–π `sendPersonalMessage(Long telegramId, String text)`

## üì± –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—É–ø—Ä–æ—â–µ–Ω–Ω–æ–µ)

```
‚≠ê –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏ –æ –∑–∞–∫–∞–∑–µ!

üìã –ó–∞–∫–∞–∑ #29

üçï –ù–∞–º –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ –≤–∞—à–µ –º–Ω–µ–Ω–∏–µ!
–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è –ª–∏ –≤–∞–º –∑–∞–∫–∞–∑, –∏ –ø–æ–º–æ–≥–∏—Ç–µ –Ω–∞–º —Å—Ç–∞—Ç—å –µ—â–µ –ª—É—á—à–µ.

üëÜ –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤:
üîó –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–æ—Ä–º–µ –æ—Ç–∑—ã–≤–∞

üíô –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç–µ –î–ò–ú–ë–û –ü–ò–¶–¶–ê!
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º —á—Ç–æ –∏ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤
- –ú–∏–Ω–∏–º—É–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ = –º–µ–Ω—å—à–µ —Ç–æ—á–µ–∫ –æ—Ç–∫–∞–∑–∞
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞
- –û–¥–∏–Ω –º–µ—Ç–æ–¥ `sendReviewNotificationToUser()` –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `sendStatusNotificationToUser()`
- –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `sendPersonalMessage()` 
- –ù–∏–∫–∞–∫–∏—Ö —Å–ª–æ–∂–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–π

### ‚úÖ –û—Ç–ª–∞–¥–∫–∞
- –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ = –ª–µ–≥—á–µ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–º—É –∫–æ–¥—É —Å—Ç–∞—Ç—É—Å–æ–≤
- –ú–∏–Ω–∏–º—É–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–¢–µ–ø–µ—Ä—å –ª–æ–≥–∏–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–ø—Ä–æ—â–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∫–Ω–æ–ø–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–µ —É –≤–∞—Å —Ä–∞–±–æ—Ç–∞—é—Ç.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üìù –û—Ç–∑—ã–≤" –≤ –∞–¥–º–∏–Ω—Å–∫–æ–º –±–æ—Ç–µ
2. –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É: "‚úÖ –ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–∑—ã–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω"
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å—Å—ã–ª–∫–æ–π –æ—Ç @DIMBOpizzaBot

---

**‚ö° –õ–æ–≥–∏–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–ø—Ä–æ—â–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!**
