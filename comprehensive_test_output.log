🚀 Comprehensive тестирование PizzaNat API
[0;34mПроверка доступности API...[0m
[0;32m✅ API доступен[0m
==================================
[0;34m1. HEALTH CHECK[0m
[1;33mТестирование: Health Check[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;34m2. КАТЕГОРИИ[0m
[1;33mТестирование: Получить все категории[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Получить категорию по ID[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;34m3. ПРОДУКТЫ[0m
[1;33mТестирование: Получить все продукты[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Получить продукт по ID[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Продукты по категории[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Специальные предложения[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Поиск продуктов (кириллица)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;34m4. ПУНКТЫ ДОСТАВКИ[0m
[1;33mТестирование: Получить все активные пункты доставки[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Получить пункт доставки по ID[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;34m🚚 4B. API ДОСТАВКИ[0m
[1;33mТестирование: Основной health check (новый)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Детальный health check[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Readiness probe[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Liveness probe[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Подсказки адресов: Волжск[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Подсказки адресов: Москва[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Валидация адреса Волжск[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Валидация адреса вне зоны[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Расчет доставки 800 руб[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Расчет доставки 1200 руб (бесплатная)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Подсказки адресов: СПб (без лимита)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Подсказки адресов: поиск по цифрам[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Валидация Москва (вне зоны)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Расчет доставки Москва (вне зоны)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Подсказки без параметров[0m
[0;32m✅ УСПЕХ (валидация параметров работает - HTTP 400)[0m
---
[1;33mТестирование: Валидация без параметров[0m
[0;32m✅ УСПЕХ (валидация параметров работает - HTTP 400)[0m
---
[1;33mТестирование: Расчет без параметров[0m
[0;32m✅ УСПЕХ (валидация параметров работает - HTTP 400)[0m
---
[1;33mТестирование: Пустой query в подсказках[0m
[0;32m✅ УСПЕХ (пустой query отклонен - HTTP 400)[0m
---
[1;33mТестирование: Расчет без orderAmount[0m
[0;31m❌ ОШИБКА (ожидался код 400, получен 200)[0m
---
[0;34m🏠 4B2. ДЕТАЛЬНЫЕ ТЕСТЫ ПОДСКАЗОК АДРЕСОВ[0m
📍 Тестирование подсказок улиц Волжска (детальное)[0m
[1;33m🧪 Детальный тест подсказок: Поиск улиц на 'Ле'[0m
   Запрос: 'Ле'
   Получено подсказок: 1
   ✅ Количество результатов: OK (1 >= 1)
   ✅ shortAddress содержит 'Ленина': OK
   ✅ shortAddress не содержит 'Волжск': OK
   Примеры подсказок:
     - Ленина
   [0;32m✅ ПРОЙДЕН[0m
---
[1;33m🧪 Детальный тест подсказок: Поиск улиц 'Лен'[0m
   Запрос: 'Лен'
   Получено подсказок: 1
   ✅ Количество результатов: OK (1 >= 1)
   ✅ shortAddress содержит 'Ленина': OK
   ✅ shortAddress не содержит 'улица': OK
   Примеры подсказок:
     - Ленина
   [0;32m✅ ПРОЙДЕН[0m
---
[1;33m🧪 Детальный тест подсказок: Поиск улиц 'Садовая'[0m
   Запрос: 'Садовая'
   Получено подсказок: 1
   ✅ Количество результатов: OK (1 >= 1)
   ✅ shortAddress содержит 'Садовая': OK
   ✅ shortAddress не содержит 'переулок': OK
   Примеры подсказок:
     - Садовая улица
   [0;32m✅ ПРОЙДЕН[0m
---
[1;33m🧪 Детальный тест подсказок: Поиск несуществующей улицы[0m
   Запрос: 'НесуществующаяУлица'
   Получено подсказок: 1
   ✅ Количество результатов: OK (1 >= 0)
   Примеры подсказок:
     - Республика Татарстан (Татарстан), Зеленодольск, Волжская улица
   [0;32m✅ ПРОЙДЕН[0m
---
[1;33m🧪 Детальный тест подсказок: Поиск 'Промышленная'[0m
   Запрос: 'Промышленная'
   Получено подсказок: 6
   ✅ Количество результатов: OK (6 >= 1)
   ✅ shortAddress содержит 'Промышленная': OK
   ✅ shortAddress не содержит 'Республика': OK
   Примеры подсказок:
     - Промышленная улица
     - 3-я Промышленная улица
     - 2-я Промышленная улица
   [0;32m✅ ПРОЙДЕН[0m
---
[1;33m🧪 Детальный тест подсказок: Проверка отсутствия полных адресов[0m
   Запрос: 'Мира'
   Получено подсказок: 1
   ✅ Количество результатов: OK (1 >= 1)
   ✅ shortAddress содержит 'Мира': OK
   ✅ shortAddress не содержит 'Республика Марий Эл': OK
   Примеры подсказок:
     - Мира
   [0;32m✅ ПРОЙДЕН[0m
---
[1;33m🧪 Детальный тест подсказок: Тест кириллицы 'Советская'[0m
   Запрос: 'Советская'
   Получено подсказок: 1
   ✅ Количество результатов: OK (1 >= 1)
   ✅ shortAddress содержит 'Советская': OK
   ✅ shortAddress не содержит 'город': OK
   Примеры подсказок:
     - Советская улица
   [0;32m✅ ПРОЙДЕН[0m
---
[1;33m🧪 Тест лимита результатов для 'Промышленная'[0m
   ✅ Лимит работает: получено 3 результатов (≤ 3)
---
[0;34m🗺️ 4C. ЗОНАЛЬНАЯ СИСТЕМА ДОСТАВКИ ГОРОДА ВОЛЖСК[0m
📍 ТЕСТИРОВАНИЕ СИСТЕМЫ ДОСТАВКИ ВОЛЖСК[0m
=================================================================
[0;32m✅ СТАТУС: Зональная система АКТИВИРОВАНА и работает корректно![0m
[0;34m🎯 РЕЗУЛЬТАТ: Все 11 районов Волжска определяются правильно[0m
🏆 ДОСТИЖЕНИЕ: Дифференцированное ценообразование 100₽-300₽ функционирует[0m

[0;32m🏛️ ТЕСТ ЦЕНТРАЛЬНЫХ УЛИЦ (Центральный: 200₽)[0m

[0;34m🧪 ТЕСТ 38: Центральная улица города[0m
   📍 Адрес: улица Ленина, 15
   💰 Сумма заказа: 500 руб
   🎯 Ожидаемый район: Центральный
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Центральный
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 39: Бесплатная доставка в центре[0m
   📍 Адрес: Советская улица, 22
   💰 Сумма заказа: 1200 руб
   🎯 Ожидаемый район: Центральный
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Центральный
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 40: Граничная сумма (999₽)[0m
   📍 Адрес: Комсомольская, 8
   💰 Сумма заказа: 999 руб
   🎯 Ожидаемый район: Центральный
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Центральный
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 41: Улица поэта[0m
   📍 Адрес: Пушкина, 12
   💰 Сумма заказа: 800 руб
   🎯 Ожидаемый район: Центральный
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Центральный
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

🤝 ТЕСТ УЛИЦ РАЙОНА ДРУЖБА (Дружба: 100₽ - САМЫЙ ДЕШЕВЫЙ)[0m

[0;34m🧪 ТЕСТ 42: Основная улица района Дружба[0m
   📍 Адрес: улица Дружбы, 5
   💰 Сумма заказа: 400 руб
   🎯 Ожидаемый район: Дружба
   💸 Ожидаемая стоимость: 100.00 руб
   📊 Результат:
   📍 Определен район: Дружба
   🏙️ Город: Волжск
   💰 Стоимость доставки: 100.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 20-30 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 43: Бесплатная доставка[0m
   📍 Адрес: Молодежная, 18
   💰 Сумма заказа: 1100 руб
   🎯 Ожидаемый район: Дружба
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Дружба
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 20-30 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 44: Граничная сумма (799₽)[0m
   📍 Адрес: Пионерская, 7
   💰 Сумма заказа: 799 руб
   🎯 Ожидаемый район: Дружба
   💸 Ожидаемая стоимость: 100.00 руб
   📊 Результат:
   📍 Определен район: Дружба
   🏙️ Город: Волжск
   💰 Стоимость доставки: 100.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 20-30 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 45: Спортивная улица[0m
   📍 Адрес: Спортивная, 11
   💰 Сумма заказа: 600 руб
   🎯 Ожидаемый район: Дружба
   💸 Ожидаемая стоимость: 100.00 руб
   📊 Результат:
   📍 Определен район: Дружба
   🏙️ Город: Волжск
   💰 Стоимость доставки: 100.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 20-30 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🏭 ТЕСТ УЛИЦ МАШИНОСТРОИТЕЛЕЙ (Машиностроитель: 200₽)[0m

[0;34m🧪 ТЕСТ 46: Главная улица района[0m
   📍 Адрес: Машиностроителей, 45
   💰 Сумма заказа: 750 руб
   🎯 Ожидаемый район: Машиностроитель
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Машиностроитель
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 47: Бесплатная доставка[0m
   📍 Адрес: 2-я Машиностроителей, 12
   💰 Сумма заказа: 1100 руб
   🎯 Ожидаемый район: Машиностроитель
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Машиностроитель
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 48: Металлурги[0m
   📍 Адрес: Металлургов, 8
   💰 Сумма заказа: 950 руб
   🎯 Ожидаемый район: Машиностроитель
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Машиностроитель
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 49: Точно на пороге (1000₽)[0m
   📍 Адрес: Энтузиастов, 23
   💰 Сумма заказа: 1000 руб
   🎯 Ожидаемый район: Машиностроитель
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Машиностроитель
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

✈️ ТЕСТ АВИАЦИОННЫХ УЛИЦ (ВДК: 200₽)[0m

[0;34m🧪 ТЕСТ 50: Космическая улица[0m
   📍 Адрес: Гагарина, 33
   💰 Сумма заказа: 650 руб
   🎯 Ожидаемый район: ВДК
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: ВДК
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 51: Авиационная улица[0m
   📍 Адрес: Чкалова, 17
   💰 Сумма заказа: 1300 руб
   🎯 Ожидаемый район: ВДК
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: ВДК
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 52: Авиационный район[0m
   📍 Адрес: Авиации, 9
   💰 Сумма заказа: 800 руб
   🎯 Ожидаемый район: ВДК
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: ВДК
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 53: Полярник[0m
   📍 Адрес: Папанина, 14
   💰 Сумма заказа: 999 руб
   🎯 Ожидаемый район: ВДК
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: ВДК
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

🌲 ТЕСТ СЕВЕРНЫХ УЛИЦ (Северный: 200₽)[0m

[0;34m🧪 ТЕСТ 54: Главная северная улица[0m
   📍 Адрес: Северная, 28
   💰 Сумма заказа: 700 руб
   🎯 Ожидаемый район: Северный
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Северный
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 30-40 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 55: Лесная зона[0m
   📍 Адрес: Лесная, 16
   💰 Сумма заказа: 1150 руб
   🎯 Ожидаемый район: Северный
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Северный
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 30-40 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 56: Хвойные улицы[0m
   📍 Адрес: Сосновая, 5
   💰 Сумма заказа: 880 руб
   🎯 Ожидаемый район: Северный
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Северный
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 30-40 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 57: Горная местность[0m
   📍 Адрес: Горная, 21
   💰 Сумма заказа: 1000 руб
   🎯 Ожидаемый район: Северный
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Северный
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 30-40 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[1;33m⚡ ТЕСТ УЛИЦ ГОРГАЗА (Горгаз: 200₽)[0m

[0;34m🧪 ТЕСТ 58: Кооператив[0m
   📍 Адрес: Кооперативная, 42
   💰 Сумма заказа: 550 руб
   🎯 Ожидаемый район: Горгаз
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Горгаз
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 59: Педагогическая улица[0m
   📍 Адрес: Учительская, 19
   💰 Сумма заказа: 1250 руб
   🎯 Ожидаемый район: Горгаз
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Горгаз
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 60: Ученый-аграрий[0m
   📍 Адрес: Тимирязева, 8
   💰 Сумма заказа: 920 руб
   🎯 Ожидаемый район: Горгаз
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Горгаз
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 61: Промышленная база[0m
   📍 Адрес: Промбаза, 15
   💰 Сумма заказа: 999 руб
   🎯 Ожидаемый район: Горгаз
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Горгаз
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[1;33m🌅 ТЕСТ УЛИЦ ЗАРИ (Заря: 250₽ - ДОРОЖЕ ЦЕНТРА)[0m

[0;34m🧪 ТЕСТ 62: Главная улица района Заря[0m
   📍 Адрес: Заря, 67
   💰 Сумма заказа: 600 руб
   🎯 Ожидаемый район: Заря
   💸 Ожидаемая стоимость: 250.00 руб
   📊 Результат:
   📍 Определен район: Заря
   🏙️ Город: Волжск
   💰 Стоимость доставки: 250.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 30-40 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 63: Бесплатная доставка[0m
   📍 Адрес: 1-я Заринская, 34
   💰 Сумма заказа: 1300 руб
   🎯 Ожидаемый район: Заря
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Заря
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 30-40 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 64: За рекой (не достигнут порог 1200₽)[0m
   📍 Адрес: Заречная, 11
   💰 Сумма заказа: 1100 руб
   🎯 Ожидаемый район: Заря
   💸 Ожидаемая стоимость: 250.00 руб
   📊 Результат:
   📍 Определен район: Заря
   🏙️ Город: Волжск
   💰 Стоимость доставки: 250.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 30-40 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 65: Граничная сумма (на 1₽ меньше порога)[0m
   📍 Адрес: Зеленая, 25
   💰 Сумма заказа: 1199 руб
   🎯 Ожидаемый район: Заря
   💸 Ожидаемая стоимость: 250.00 руб
   📊 Результат:
   📍 Определен район: Заря
   🏙️ Город: Волжск
   💰 Стоимость доставки: 250.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 30-40 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

🎯 ТЕСТЫ ГРАНИЧНЫХ СЛУЧАЕВ (Зональные пороги: 800₽/1000₽/1200₽/1500₽)[0m
=========================================

[0;34m🧪 ТЕСТ 66: Точно порог бесплатной доставки Дружба (800₽)[0m
   📍 Адрес: Дружбы, 99
   💰 Сумма заказа: 800 руб
   🎯 Ожидаемый район: Дружба
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Дружба
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 20-30 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 67: На 1₽ меньше порога Дружба[0m
   📍 Адрес: Дружбы, 99
   💰 Сумма заказа: 799 руб
   🎯 Ожидаемый район: Дружба
   💸 Ожидаемая стоимость: 100.00 руб
   📊 Результат:
   📍 Определен район: Дружба
   🏙️ Город: Волжск
   💰 Стоимость доставки: 100.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 20-30 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 68: Точно порог в центре (1000₽)[0m
   📍 Адрес: Ленина, 1
   💰 Сумма заказа: 1000 руб
   🎯 Ожидаемый район: Центральный
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Центральный
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 69: На 1₽ меньше порога в центре[0m
   📍 Адрес: Ленина, 1
   💰 Сумма заказа: 999 руб
   🎯 Ожидаемый район: Центральный
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Центральный
   🏙️ Город: Волжск
   💰 Стоимость доставки: 200.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 25-35 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;31m🏗️ ТЕСТ ПРОМЫШЛЕННЫХ ЗОН (Промузел/Прибрежный: 300₽ - САМЫЕ ДОРОГИЕ)[0m

[0;34m🧪 ТЕСТ 70: Промышленная зона[0m
   📍 Адрес: Промышленная, 10
   💰 Сумма заказа: 500 руб
   🎯 Ожидаемый район: Промузел
   💸 Ожидаемая стоимость: 300.00 руб
   📊 Результат:
   📍 Определен район: Промузел
   🏙️ Город: Волжск
   💰 Стоимость доставки: 300.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 40-55 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 71: Бесплатная доставка в промзоне (1500₽)[0m
   📍 Адрес: Промышленная, 10
   💰 Сумма заказа: 1500 руб
   🎯 Ожидаемый район: Промузел
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Промузел
   🏙️ Город: Волжск
   💰 Стоимость доставки: 0 руб
   🎁 Бесплатная доставка: true
   ✅ Доставка доступна: true
   ⏰ Время доставки: 40-55 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[0;34m🧪 ТЕСТ 72: На 1₽ меньше порога промзоны[0m
   📍 Адрес: Промышленная, 10
   💰 Сумма заказа: 1499 руб
   🎯 Ожидаемый район: Промузел
   💸 Ожидаемая стоимость: 300.00 руб
   📊 Результат:
   📍 Определен район: Промузел
   🏙️ Город: Волжск
   💰 Стоимость доставки: 300.00 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 40-55 минут
   [0;32m✅ УСПЕХ: Стоимость доставки корректна[0m

[1;33m❓ ТЕСТЫ НЕИЗВЕСТНЫХ АДРЕСОВ[0m
======================================

[0;34m🧪 ТЕСТ 73: Fallback к стандартному тарифу[0m
   📍 Адрес: Неизвестная улица, 999
   💰 Сумма заказа: 500 руб
   🎯 Ожидаемый район: Стандартная зона
   💸 Ожидаемая стоимость: 200.00 руб
   📊 Результат:
   📍 Определен район: Стандартная зона
   🏙️ Город: Волжск
   💰 Стоимость доставки: 250 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 30-50 минут
   [0;31m❌ ОШИБКА: Ожидалось 200.00 руб, получено 250 руб[0m

[0;34m🧪 ТЕСТ 74: Неизвестный адрес с большой суммой[0m
   📍 Адрес: Выдуманная, 123
   💰 Сумма заказа: 1100 руб
   🎯 Ожидаемый район: Стандартная зона
   💸 Ожидаемая стоимость: 0 руб
   📊 Результат:
   📍 Определен район: Стандартная зона
   🏙️ Город: Волжск
   💰 Стоимость доставки: 250 руб
   🎁 Бесплатная доставка: false
   ✅ Доставка доступна: true
   ⏰ Время доставки: 30-50 минут
   [0;31m❌ ОШИБКА: Ожидалось 0 руб, получено 250 руб[0m
[0;34m🔧 4D. ДЕТАЛЬНЫЕ ТЕСТЫ API ДОСТАВКИ[0m

📍 ДОПОЛНИТЕЛЬНЫЕ ТЕСТЫ ПОДСКАЗОК АДРЕСОВ[0m
[1;33mТестирование: Поиск Волжск (лимит 5)[0m
[0;32m✅ УСПЕХ (200)[0m
   Ответ: [{"address":"Россия, Республика Татарстан (Татарс...
---
[1;33mТестирование: Поиск по цифрам[0m
[0;32m✅ УСПЕХ (200)[0m
   Ответ: [{"address":"Россия, Республика Татарстан (Татарс...
---
[1;33mТестирование: Поиск СПб (без лимита)[0m
[0;32m✅ УСПЕХ (200)[0m
   Ответ: []...
---

✅ ДОПОЛНИТЕЛЬНЫЕ ТЕСТЫ ВАЛИДАЦИИ АДРЕСОВ[0m
[1;33mТестирование: Полный адрес Волжска[0m
[0;32m✅ УСПЕХ (200)[0m
   Ответ: {"valid":false,"address":"Россия, Республика Марий Эл, В...
---
[1;33mТестирование: Конкретный адрес ул. Ленина[0m
[0;32m✅ УСПЕХ (200)[0m
   Ответ: {"valid":false,"address":"г. Волжск, ул. Ленина, д. 1","suggesti...
---

💰 ДОПОЛНИТЕЛЬНЫЕ ТЕСТЫ РАСЧЕТА ДОСТАВКИ[0m
[1;33mТестирование: Расчет доставки 800₽[0m
[0;32m✅ УСПЕХ (200)[0m
   Ответ: {"estimatedTime":"40-55 минут","estimatedTimeMin":40,"baseCost":300.00,"add...
---
[1;33mТестирование: Расчет доставки Москва (вне зоны)[0m
[0;32m✅ УСПЕХ (200)[0m
   Ответ: {"estimatedTime":"30-50 минут","estimatedTimeMin":30,"baseCost":250,"addres...
---

📦 ТЕСТЫ ПУНКТОВ ДОСТАВКИ (альтернативные endpoint'ы)[0m
[1;33mТестирование: Все пункты доставки (alternative endpoint)[0m
[0;32m✅ УСПЕХ (200)[0m
   Ответ: [{"id":1,"name":"Пункт выдачи #1","address":"ул. Шестакова...
---
[1;33mТестирование: Пункт доставки #1 (alternative endpoint)[0m
[0;32m✅ УСПЕХ (200)[0m
   Ответ: {"id":1,"name":"Пункт выдачи #1","address":"ул. Шестакова ...
---
[1;33mТестирование: Несуществующий пункт доставки[0m
[0;31m❌ ОШИБКА (500, ожидался 404)[0m
---
[0;34m🎯 4E. СИСТЕМАТИЗИРОВАННЫЕ ТЕСТЫ ЗОНАЛЬНОЙ СИСТЕМЫ[0m

[0;32m🏪 СИСТЕМАТИЗИРОВАННЫЕ ТЕСТЫ БАЗОВОЙ ДОСТАВКИ[0m
[1;33mЗональный тест: Базовый тест 1 (500₽)[0m
   HTTP: 200 | Зона: Стандартная зона | Стоимость: 250 ₽ | Город: Волжск | Доступна: true
[1;33m⚠️  ЧАСТИЧНО - Зона правильная, но стоимость отличается (ожидалось 200.00)[0m

[1;33mЗональный тест: Базовый тест 2 (1200₽ - бесплатная)[0m
   HTTP: 200 | Зона: Стандартная зона | Стоимость: 0 ₽ | Город: Волжск | Доступна: true
[0;32m✅ УСПЕХ - Зона и стоимость соответствуют ожиданиям[0m

[1;33mЗональный тест: Базовый тест 3 (800₽)[0m
   HTTP: 200 | Зона: Стандартная зона | Стоимость: 250 ₽ | Город: Волжск | Доступна: true
[1;33m⚠️  ЧАСТИЧНО - Зона правильная, но стоимость отличается (ожидалось 200.00)[0m


🎁 СИСТЕМАТИЗИРОВАННЫЕ ТЕСТЫ БЕСПЛАТНОЙ ДОСТАВКИ[0m
[1;33mЗональный тест: Бесплатная 1 (1100₽)[0m
   HTTP: 200 | Зона: Стандартная зона | Стоимость: 250 ₽ | Город: Волжск | Доступна: true
[1;33m⚠️  ЧАСТИЧНО - Зона правильная, но стоимость отличается (ожидалось 0)[0m

[1;33mЗональный тест: Бесплатная 2 (1600₽)[0m
   HTTP: 200 | Зона: Стандартная зона | Стоимость: 0 ₽ | Город: Волжск | Доступна: true
[0;32m✅ УСПЕХ - Зона и стоимость соответствуют ожиданиям[0m

[1;33mЗональный тест: Бесплатная 3 (точно 1000₽)[0m
   HTTP: 200 | Зона: Стандартная зона | Стоимость: 250 ₽ | Город: Волжск | Доступна: true
[1;33m⚠️  ЧАСТИЧНО - Зона правильная, но стоимость отличается (ожидалось 0)[0m


⚖️ СИСТЕМАТИЗИРОВАННЫЕ ГРАНИЧНЫЕ ТЕСТЫ[0m
[1;33mЗональный тест: Граница: ровно 1000₽[0m
   HTTP: 200 | Зона: Стандартная зона | Стоимость: 250 ₽ | Город: Волжск | Доступна: true
[1;33m⚠️  ЧАСТИЧНО - Зона правильная, но стоимость отличается (ожидалось 0)[0m

[1;33mЗональный тест: Граница: 999₽[0m
   HTTP: 200 | Зона: Стандартная зона | Стоимость: 250 ₽ | Город: Волжск | Доступна: true
[1;33m⚠️  ЧАСТИЧНО - Зона правильная, но стоимость отличается (ожидалось 200.00)[0m

[1;33mЗональный тест: Граница: 1001₽[0m
   HTTP: 200 | Зона: Стандартная зона | Стоимость: 250 ₽ | Город: Волжск | Доступна: true
[1;33m⚠️  ЧАСТИЧНО - Зона правильная, но стоимость отличается (ожидалось 0)[0m

[1;33mЗональный тест: Граница: 0₽[0m
   HTTP: 200 | Зона: Стандартная зона | Стоимость: 250 ₽ | Город: Волжск | Доступна: true
[1;33m⚠️  ЧАСТИЧНО - Зона правильная, но стоимость отличается (ожидалось 200.00)[0m

[0;34m5. АУТЕНТИФИКАЦИЯ[0m
[1;33mРегистрация тестового пользователя...[0m
[0;32m✅ Пользователь зарегистрирован, токен получен[0m
[1;33mТестирование: Вход в систему[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;34m📱 5B. SMS АВТОРИЗАЦИЯ[0m
[1;33mТестирование отправки SMS кода...[0m
[0;32m✅ УСПЕХ (200) - SMS код отправлен[0m
[0;34m   📱 Маскированный номер: +7 (960) ***-**-72[0m
[0;34m   🔢 Длина кода: 4[0m
[0;34m   ⏰ Истекает: 2025-07-19T16:08:35.611076888[0m
[1;33mТестирование верификации с неверным кодом...[0m
[0;32m✅ УСПЕХ (400) - Неверный код отклонен[0m
---
[1;33mТестирование верификации с несуществующим номером...[0m
[0;32m✅ УСПЕХ (400) - Несуществующий номер отклонен[0m
---
[0;34m📋 Информация о SMS авторизации:[0m
[1;33m   📱 Для полного тестирования SMS авторизации:[0m
[1;33m   1. Проверьте SMS на номере +79600948872[0m
[1;33m   2. Используйте полученный код для верификации:[0m
[1;33m      curl -X POST "http://localhost:8080/api/v1/auth/sms/verify-code" \033[0m
[1;33m        -H "Content-Type: application/json" \033[0m
[1;33m        -d '{"phoneNumber": "+79600948872", "code": "XXXX"}'[0m
[1;33m   3. В случае успеха получите JWT токен для авторизации[0m

[0;34m6. КОРЗИНА[0m
[1;33mТестирование: Получить пустую корзину[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Добавить товар в корзину с опциями[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Получить корзину с товарами[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Обновить количество товара[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Удалить товар из корзины[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Добавить товар для заказа[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;34m7. ЗАКАЗЫ[0m
[1;33mТестирование: Создать заказ с пунктом выдачи[0m
[0;32m✓ В корзине уже есть товары (сумма: 649.00)[0m
[0;32m✅ УСПЕХ (200) - Заказ #34 создан[0m
---
[1;33mТестирование: Создать заказ с адресом доставки (Android)[0m
[1;33mКорзина пуста, добавляем товар...[0m
[0;32m✓ Товар добавлен в корзину[0m
[0;32m✅ УСПЕХ (200) - Заказ #35 создан[0m
---
[1;33mТестирование: Создать заказ с двумя типами адреса[0m
[1;33mКорзина пуста, добавляем товар...[0m
[0;32m✓ Товар добавлен в корзину[0m
[0;32m✅ УСПЕХ (200) - Заказ #36 создан[0m
---
[1;33mТестирование: Получить заказы пользователя[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Получить заказ #36 по ID[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;34m8. АДМИНИСТРАТИВНЫЙ API[0m
[1;33mТестирование: Административный доступ с обычным пользователем[0m
[0;31m❌ ОШИБКА (ожидался код 403/401, получен 500)[0m
---
[1;33mАвторизация администратора...[0m
[0;32m✅ Администратор авторизован[0m
[1;33mТестирование: Получить все заказы (админ)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Обновить статус заказа[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Создать продукт (админ)[0m
[0;31m❌ ОШИБКА (404)[0m
Ответ: {"status":404,"message":"Продукт с таким именем уже существует","timestamp":1752929921825}...
---
[1;33mТестирование: Обновить продукт (админ)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Удалить продукт (админ)[0m
[0;31m❌ ОШИБКА (404)[0m
Ответ: {"status":404,"message":"Продукт не найден с ID: 999","timestamp":1752929922248}...
---
[1;33mТестирование: Пагинация заказов (админ)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;34m📱 TELEGRAM ИНТЕГРАЦИЯ ТЕСТЫ[0m
[1;33mСоздание заказа для Telegram уведомления...[0m
[1;33mТестирование: Добавить товар для Telegram теста[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Создание заказа с Telegram уведомлением[0m
[0;31m❌ ОШИБКА (404) - Не удалось создать заказ для Telegram теста[0m
[0;34m9. EDGE CASES И НЕГАТИВНЫЕ ТЕСТЫ[0m
[1;33mТестирование: Несуществующий продукт[0m
[0;31m❌ ОШИБКА (404)[0m
Ответ: {"status":404,"message":"Продукт не найден с ID: 99999","timestamp":1752929923676}...
---
[1;33mТестирование: Несуществующая категория[0m
[0;31m❌ ОШИБКА (404)[0m
Ответ: {"status":404,"message":"Категория не найдена с ID: 99999","timestamp":1752929923798}...
---
[1;33mТестирование: Несуществующий пункт доставки[0m
[0;31m❌ ОШИБКА (404)[0m
Ответ: {"status":404,"message":"Пункт доставки не найден с ID: 99999","timestamp":1752929923933}...
---
[1;33mТестирование: Некорректные данные корзины[0m
[0;32m✅ УСПЕХ (валидация корзины работает - HTTP 400)[0m
---
[1;33mТестирование: Поиск с пустым запросом[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Поиск с длинным запросом[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Неавторизованный доступ[0m
[0;31m❌ ОШИБКА (ожидался код 401/403, получен 200)[0m
---
[1;33mТестирование: Неверный JWT токен[0m
[0;31m❌ ОШИБКА (ожидался код 401/403, получен 200)[0m
---
[0;34m10. ДОПОЛНИТЕЛЬНЫЕ ФУНКЦИОНАЛЬНЫЕ ТЕСТЫ[0m
[1;33mТестирование: Проверить создание новых пунктов доставки[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Валидация некорректного заказа[0m
[1;33mТестирование: Добавить товар для теста валидации[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;32m✅ УСПЕХ (валидация работает - HTTP 400)[0m
---
[1;33mТестирование: Поиск 'Пицца'[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Поиск 'напиток'[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Пагинация продуктов[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Продукты несуществующей категории[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;34m📱 5B. АВТОРИЗАЦИЯ ЧЕРЕЗ TELEGRAM (полуавтоматический сценарий)[0m
[1;33mПерейдите по ссылке для авторизации через Telegram:[0m
   [0;34mhttps://t.me/PizzaNatBot?start=tg_auth_NDidalp7MLS6dDWDrbiI[0m
[1;33mПосле отправки номера телефона в Telegram, тест продолжит работу...[0m

   ⏳ Ожидание завершения авторизации: 60 сек   ⏳ Ожидание завершения авторизации: 59 сек   ⏳ Ожидание завершения авторизации: 58 сек   ⏳ Ожидание завершения авторизации: 57 сек   ⏳ Ожидание завершения авторизации: 56 сек   ⏳ Ожидание завершения авторизации: 55 сек   ⏳ Ожидание завершения авторизации: 54 сек   ⏳ Ожидание завершения авторизации: 53 сек   ⏳ Ожидание завершения авторизации: 52 сек   ⏳ Ожидание завершения авторизации: 51 сек   ⏳ Ожидание завершения авторизации: 50 сек   ⏳ Ожидание завершения авторизации: 49 сек   ⏳ Ожидание завершения авторизации: 48 сек   ⏳ Ожидание завершения авторизации: 47 сек   ⏳ Ожидание завершения авторизации: 46 сек   ⏳ Ожидание завершения авторизации: 45 сек   ⏳ Ожидание завершения авторизации: 44 сек   ⏳ Ожидание завершения авторизации: 43 сек   ⏳ Ожидание завершения авторизации: 42 сек   ⏳ Ожидание завершения авторизации: 41 сек   ⏳ Ожидание завершения авторизации: 40 сек   ⏳ Ожидание завершения авторизации: 39 сек   ⏳ Ожидание завершения авторизации: 38 сек   ⏳ Ожидание завершения авторизации: 37 сек   ⏳ Ожидание завершения авторизации: 36 сек   ⏳ Ожидание завершения авторизации: 35 сек   ⏳ Ожидание завершения авторизации: 34 сек   ⏳ Ожидание завершения авторизации: 33 сек   ⏳ Ожидание завершения авторизации: 32 сек   ⏳ Ожидание завершения авторизации: 31 сек   ⏳ Ожидание завершения авторизации: 30 сек   ⏳ Ожидание завершения авторизации: 29 сек   ⏳ Ожидание завершения авторизации: 28 сек   ⏳ Ожидание завершения авторизации: 27 сек   ⏳ Ожидание завершения авторизации: 26 сек   ⏳ Ожидание завершения авторизации: 25 сек   ⏳ Ожидание завершения авторизации: 24 сек   ⏳ Ожидание завершения авторизации: 23 сек   ⏳ Ожидание завершения авторизации: 22 сек   ⏳ Ожидание завершения авторизации: 21 сек   ⏳ Ожидание завершения авторизации: 20 сек   ⏳ Ожидание завершения авторизации: 19 сек   ⏳ Ожидание завершения авторизации: 18 сек   ⏳ Ожидание завершения авторизации: 17 сек   ⏳ Ожидание завершения авторизации: 16 сек   ⏳ Ожидание завершения авторизации: 15 сек   ⏳ Ожидание завершения авторизации: 14 сек   ⏳ Ожидание завершения авторизации: 13 сек   ⏳ Ожидание завершения авторизации: 12 сек   ⏳ Ожидание завершения авторизации: 11 сек   ⏳ Ожидание завершения авторизации: 10 сек   ⏳ Ожидание завершения авторизации:  9 сек   ⏳ Ожидание завершения авторизации:  8 сек   ⏳ Ожидание завершения авторизации:  7 сек   ⏳ Ожидание завершения авторизации:  6 сек   ⏳ Ожидание завершения авторизации:  5 сек   ⏳ Ожидание завершения авторизации:  4 сек   ⏳ Ожидание завершения авторизации:  3 сек   ⏳ Ожидание завершения авторизации:  2 сек   ⏳ Ожидание завершения авторизации:  1 сек
[0;31m❌ Telegram авторизация не подтверждена или не получен токен[0m
Ответ: {"success":true,"status":"PENDING","message":"Ожидание подтверждения в Telegram","authData":null}
[0;34m🤖 10.5. ТЕСТИРОВАНИЕ АДМИНСКОГО БОТА С ПЛАТЕЖАМИ[0m
[1;33mСоздание тестового заказа с платежами для админского бота...[0m
[1;33mТестирование: Добавить товар для админского бота теста[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Создать заказ для админского бота[0m
[0;32m✓ В корзине уже есть товары (сумма: 1947.00)[0m
[0;32m✅ УСПЕХ (200) - Заказ #38 создан[0m
---
[0;32m✅ Заказ #38 создан для тестирования админского бота[0m
[1;33mСоздание СБП платежа для заказа #38...[0m
[0;32m✅ УСПЕХ (200) - СБП платеж создан для админского бота[0m
[0;34m💳 СБП платеж: #23 (ЮКасса: 300daa83-000f-5000-b000-1dfe794f5e35)[0m
🔗 Ссылка проверки: https://yoomoney.ru/checkout/payments/v2/contract?orderId=300daa83-000f-5000-b000-1dfe794f5e35[0m
[1;33mСоздание карточного платежа для заказа #38...[0m
[0;32m✅ УСПЕХ (200) - Карточный платеж создан для админского бота[0m
[0;34m💳 Карточный платеж: #24 (ЮКасса: 300daa84-000f-5001-8000-1afc649ddeb4)[0m
🔗 Ссылка проверки: https://yoomoney.ru/checkout/payments/v2/contract?orderId=300daa84-000f-5001-8000-1afc649ddeb4[0m
[1;33mТестирование: Получить активные заказы (админ бот)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Получить детали заказа #38 (админ бот)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Получить платежи заказа #38 (админ бот)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mСоздание наличного заказа для сравнения...[0m
[1;33mТестирование: Добавить товар для наличного заказа[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Создать наличный заказ для сравнения[0m
[0;32m✓ В корзине уже есть товары (сумма: 649.00)[0m
[0;32m✅ УСПЕХ (200) - Заказ #39 создан[0m
---
[0;32m✅ Наличный заказ #39 создан для сравнения[0m
[1;33mТестирование: Получить детали наличного заказа #39 (админ бот)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;34m📊 ИНСТРУКЦИИ ДЛЯ ТЕСТИРОВАНИЯ АДМИНСКОГО БОТА:[0m
[1;33m1. Откройте Telegram и найдите админского бота[0m
[1;33m2. Отправьте команду /orders для просмотра активных заказов[0m
[1;33m3. Проверьте заказ #38 - должен показывать платежи[0m
[1;33m4. Проверьте заказ #39 - должен показывать 'Наличными'[0m
[1;33m5. Отправьте команду /details 38 для просмотра деталей[0m
[1;33m6. Проверьте наличие ссылок на проверку платежа в YooMoney[0m
[0;34m💳 11. ЮKASSA ПЛАТЕЖИ[0m
[1;33mТестирование: ЮКасса Health Check[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Метрики Health Check[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Получить список банков СБП[0m
[0;32m✅ УСПЕХ (200)[0m
---
[0;34m🔍 Отладка: PAYMENT_ORDER_ID = '40'[0m
[1;33mТестирование: Создание карточного платежа[0m
[0;32m✅ УСПЕХ (200)[0m
   Ответ: {"id":25,"yookassaPaymentId":"300daa8b-000f-5001-9000-192a64ae21c9","orderId":40...
---
[1;33mТестирование: Создание СБП платежа[0m
[0;32m✅ УСПЕХ (200)[0m
   Ответ: {"id":26,"yookassaPaymentId":"300daa8c-000f-5000-b000-1f7d5e3b6a9f","orderId":40...
---
[1;33mТестирование: Получение URL для оплаты заказа[0m
[0;32m✅ УСПЕХ (200)[0m
[0;34m💳 ССЫЛКА ДЛЯ ОПЛАТЫ:[0m
🔗 https://yoomoney.ru/checkout/payments/v2/contract?orderId=300daa8c-000f-5000-b000-12b74d5233ee[0m
[1;33m📱 Вы можете перейти по этой ссылке для тестирования интерфейса ЮКасса[0m
[1;33m💡 Используйте тестовую карту: 5555555555554444, 12/25, 123[0m
[1;33m🔒 Это безопасная тестовая среда ЮКасса[0m
---
[1;33mТестирование: Получение платежей для заказа[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Получение сводки метрик (админ)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Получение детальных метрик (админ)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Обновление метрик (админ)[0m
[0;32m✅ УСПЕХ (200)[0m
---
[1;33mТестирование: Создание платежа с некорректными данными[0m
[0;32m✅ УСПЕХ (некорректные данные отклонены - HTTP 400)[0m
---
[1;33mТестирование: Получение несуществующего платежа[0m
[0;32m✅ УСПЕХ (несуществующий платеж корректно обработан - HTTP 404)[0m
---
[1;33mТестирование: Создание платежа без авторизации[0m
[0;32m✅ УСПЕХ (неавторизованный доступ запрещен - HTTP 403)[0m
---
[1;33mТестирование: Обработка webhook уведомления[0m
[0;31m❌ ОШИБКА (ожидался код 200, получен 400)[0m
   Ответ webhook: {"message":"Failed to process webhook","status":"error"}...
---
[0;34m📱 11.5. СБП ФЛОУ ТЕСТЫ[0m
Проверяем что заказы с СБП приходят в админский бот только после оплаты[0m
[1;33mТест 1: Создание заказа с СБП (должен НЕ попасть в бот сразу)[0m
📦 Создание заказа для СБП теста...[0m
[0;31m❌ Не удалось создать заказ для СБП теста[0m
---
[0;34m🤖 12. ТЕСТИРОВАНИЕ ИСПРАВЛЕННОЙ ФУНКЦИОНАЛЬНОСТИ ПЛАТЕЖЕЙ В АДМИНСКОМ БОТЕ[0m
🔧 Проверка исправления проблемы 'все заказы показываются как наличные'[0m
[1;33mТестирование: Заказ #162 (2 платежа: карта + СБП)[0m
[0;31m❌ ОШИБКА - PaymentRepository нашел только 0 платеж(ей), ожидалось 2[0m
---
[1;33mТестирование: Заказ #166 (1 СБП платеж)[0m
[0;31m❌ ОШИБКА - PaymentRepository нашел только 0 платеж(ей), ожидалось 1[0m
---
[1;33mТестирование: Заказ #167 (1 карточный платеж)[0m
[0;31m❌ ОШИБКА - PaymentRepository нашел только 0 платеж(ей), ожидалось 1[0m
---
🧪 Создание финального тестового заказа с платежом...[0m
[0;32m✅ Финальный тестовый пользователь создан[0m
[0;32m✅ Финальный заказ #41 создан[0m
[0;32m✅ Финальный карточный платеж #28 создан[0m
[1;33mТестирование: ФИНАЛЬНЫЙ ТЕСТ: Заказ #41 (новый карточный платеж)[0m
[0;32m✅ УСПЕХ - PaymentRepository нашел 1 платеж(ей) для заказа #41[0m
    💳 Платеж #28 - BANK_CARD - PENDING - 649.00 руб
    🔗 YooMoney: https://yoomoney.ru/checkout/payments/v2/contract?orderId=300daa90-000f-5000-8000-155704dfb013
---
[1;33mТестирование: Получить активные заказы (должны включать финальный заказ)[0m
